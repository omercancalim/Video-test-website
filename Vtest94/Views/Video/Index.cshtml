@model IEnumerable<Vtest94.Models.Video>

@{
    ViewData["Title"] = "Uploaded Videos";
}

@section Styles {
    <link rel="stylesheet" href="~/css/Main/Middle/video-page.css" asp-append-version="true" />
}

<!-- <h2>@ViewData["Title"]</h2> -->

@if (Model != null && Model.Any())
{
    <div class="row">
        @foreach (var video in Model)
        {
            <div class="col-md-4">
                <div class="card mb-4 video-container">
                    <div class="thumbnail-container position-relative">
                        <img src="@Url.Content($"~/thumbnails/{video.ThumbnailName}")" class="card-img-top video-thumbnail" alt="Video Thumbnail">
                        <!-- Adding a button to play the video, assuming JavaScript handles play functionality -->
                        <button class="btn btn-play position-absolute top-50 start-50 translate-middle" onclick="playVideo(this)">
                            <img src="~/auxiliary/play-button.png" alt="Play" style="width: 64px;"> <!-- Size adjusted for better UX -->
                        </button>
                    </div>
                    <video controls class="w-100" style="display:none; border-radius:6px;">
                        <source src="@Url.Content($"~/videos/{video.FileName}")" type="video/mp4">
                        Your browser does not support the video tag.
                    </video>
                    <div class="custom-card-body text-white" style="border-bottom-left-radius:6px; border-bottom-right-radius:6px;">
                        <h5 class="card-title">@video.Title</h5>
                        <p class="card-text">@video.Description</p>
                        <p class="card-text"><small class="opacity-75">Uploaded on @video.UploadedDate.ToString("g")</small></p>
                    </div>
                </div>
            </div>
        }
    </div>
}
else
{
    <p>No videos have been uploaded yet.</p>
}

@section Scripts {
    <script>
        document.querySelectorAll('.video-container').forEach(container => {
            const playButton = container.querySelector('.btn-play');
            const video = container.querySelector('video');
            const thumbnail = container.querySelector('.video-thumbnail');

            playButton.addEventListener('click', () => {
                thumbnail.style.display = 'none';
                playButton.style.display = 'none';
                video.style.display = 'block';
                video.play();
            });
        });
    </script>
}
